<div *ngIf="showJson">{{results | json}}</div>
<p-toast position="top-center" key="searchingMsg"></p-toast>
<p-toast position="top-center" key="otherMsg"></p-toast>
<span class="p-input-icon-right">
  <i class="pi pi-search"></i>
  <input
    type="text"
    pInputText
    (keypress)="onKeyPressHandler($event)"
    [disabled]="disabled"
  />
</span>

<p-table [value]="results" responsiveLayout="scroll" [scrollable]="true" scrollHeight="500px">
  <ng-template pTemplate="header">
    <tr>
      <ng-container *ngFor="let header of headers">
        <th [pSortableColumn]="header" style="width:20%">{{header}} <p-sortIcon field="header"></p-sortIcon></th>
      </ng-container>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <ng-container *ngFor="let header of headers; index as i">
        <ng-container [ngSwitch]="getType(solveChild(item,header))">
          <td *ngSwitchCase="'image'">
            <p-image [src]="cleanUrlFromImgObject(solveChild(item,header))" alt="Image" width="250" [preview]="true"></p-image>
            </td>
            <td *ngSwitchCase="'html'">
              <p-scrollPanel [style]="{width: '100%', height: '200px'}">
                  <div class="htmlContainer" [innerHTML]="solveChild(item,header)"></div>
              </p-scrollPanel>
            </td>
            <td *ngSwitchCase="'url'">
              <button pButton type="button" icon="pi pi-external-link" iconPos="left" (click)="openWindow(solveChild(item,header))" [pTooltip]="solveChild(item,header)" tooltipPosition="bottom"></button>
            </td>
        <td *ngSwitchDefault>{{solveChild(item,header)}}</td>
        </ng-container>
</ng-container>
    </tr>
  </ng-template>
</p-table>
